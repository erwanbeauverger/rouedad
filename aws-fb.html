<!doctype html>
<html>

<head>
    <meta charset="UTF-8">
    <title>AWS SDK</title>
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.0.12.min.js"></script>

</head>

<body>

<button id="login">Login</button>
<div id="fb-root"></div>
<script type="text/javascript">
    var s3 = null;
    var appId = '405613876249873';
    var roleArn = 'arn:aws:iam::405802033934:role/fb-rouedad';

    window.fbAsyncInit = function () {
        // init the FB JS SDK
        FB.init({
            appId: appId
        });

        document.getElementById('login').onclick = function () {
            FB.login(function (response) {
                if (response.authResponse) { // logged in
                    AWS.config.credentials = new AWS.WebIdentityCredentials({
                        RoleArn: roleArn,
                        ProviderId: 'graph.facebook.com',
                        WebIdentityToken: response.authResponse.accessToken
                    });

                    s3 = new AWS.S3;

                    console.log('You are now logged in.');
                } else {
                    console.log('There was a problem logging you in.');
                }
            });
        };
    };

    // Load the FB JS SDK asynchronously
    (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) {
            return;
        }
        js = d.createElement(s);
        js.id = id;
        js.src = "//connect.facebook.net/en_US/all.js";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
</script>


</body>

</html>